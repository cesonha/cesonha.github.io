(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[394],{5535:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/blog",function(){return r(4565)}])},2346:function(e,t,r){"use strict";async function a(e){try{let{title:t,content:r,excerpt:a,tags:s,slug:o}=e;if(!t||!r||!o)throw Error("Title, content, and slug are required");let n=await fetch("/api/admin/create-post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t,content:r,excerpt:a,tags:s,slug:o})}),c=await n.json();if(!n.ok)throw Error(c.message||"Failed to create post");return{success:!0,message:c.message||"Post created successfully!",preview:c.preview}}catch(e){return console.error("Error creating post:",e),{success:!1,message:"Error creating post: ".concat(e.message)}}}async function s(e){try{let{title:t,description:r,slug:a,photos:s,isEdit:o=!1}=e;if(!t||!a)throw Error("Title and slug are required");let n=await fetch("/api/admin/create-album",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t,description:r,slug:a,photos:s,isEdit:o})}),c=await n.json();if(!n.ok)throw Error(c.message||"Failed to create album");return{success:!0,message:c.message||"Album ".concat(o?"updated":"created"," successfully!"),preview:c.preview}}catch(t){return console.error("Error with photo album:",t),{success:!1,message:"Error ".concat(e.isEdit?"updating":"creating"," album: ").concat(t.message)}}}r.d(t,{I:function(){return a},P:function(){return s}})},4565:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var a=r(5893),s=r(7294),o=r(1163),n=r(1664),c=r.n(n),l=r(2346);function i(){let[e,t]=(0,s.useState)(!1),r=(0,o.useRouter)(),[n,i]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),[h,b]=(0,s.useState)(""),[f,y]=(0,s.useState)(""),[v,w]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t(!1),r.push("/")},[r]),(0,s.useEffect)(()=>{n&&b(n.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"))},[n]);let j=async e=>{e.preventDefault(),w(!0),y("");try{let e=await (0,l.I)({title:n,content:d,excerpt:m,tags:x.split(",").map(e=>e.trim()).filter(e=>e),slug:h});e.success?(y(e.message),console.log("Preview of created content:",e.preview)):y("Error: ".concat(e.message))}catch(e){y("Error: ".concat(e.message))}finally{w(!1)}};return e?(0,a.jsxs)("div",{className:"max-w-4xl mx-auto py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-primary-light",children:"Create Blog Post"}),(0,a.jsx)(c(),{href:"/admin",legacyBehavior:!0,children:(0,a.jsx)("a",{className:"text-primary-light hover:text-primary-hover cursor-pointer",children:"Back to Dashboard"})})]}),f&&(0,a.jsx)("div",{className:"p-4 mb-6 rounded ".concat(f.includes("Error")?"bg-red-900/50 text-red-200":"bg-green-900/50 text-green-200"),children:f}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-text-secondary mb-2",children:"Title"}),(0,a.jsx)("input",{type:"text",id:"title",value:n,onChange:e=>i(e.target.value),className:"w-full p-2 bg-dark-card border border-dark-border rounded text-text-primary",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"slug",className:"block text-text-secondary mb-2",children:"Slug (file name)"}),(0,a.jsx)("input",{type:"text",id:"slug",value:h,onChange:e=>b(e.target.value),className:"w-full p-2 bg-dark-card border border-dark-border rounded text-text-primary",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"excerpt",className:"block text-text-secondary mb-2",children:"Excerpt"}),(0,a.jsx)("textarea",{id:"excerpt",value:m,onChange:e=>p(e.target.value),className:"w-full p-2 bg-dark-card border border-dark-border rounded text-text-primary h-20"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"tags",className:"block text-text-secondary mb-2",children:"Tags (comma separated)"}),(0,a.jsx)("input",{type:"text",id:"tags",value:x,onChange:e=>g(e.target.value),className:"w-full p-2 bg-dark-card border border-dark-border rounded text-text-primary",placeholder:"tag1, tag2, tag3"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"content",className:"block text-text-secondary mb-2",children:"Content (Markdown)"}),(0,a.jsx)("textarea",{id:"content",value:d,onChange:e=>u(e.target.value),className:"w-full p-2 bg-dark-card border border-dark-border rounded text-text-primary h-64 font-mono",required:!0})]}),(0,a.jsx)("button",{type:"submit",disabled:v,className:"px-4 py-2 bg-primary text-text-primary rounded hover:bg-primary-hover disabled:opacity-50",children:v?"Creating...":"Create Post"})]})]}):(0,a.jsx)("div",{children:"Loading..."})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5535)}),_N_E=e.O()}]);